# HTTP

HTTP 传输协议（Hypertext Transfer Protocol）是 WEB 中最基础的通信协议，
用于客户端（通常是浏览器）和服务器之间传输数据。

客户端发送 HTTP 请求，服务器返回 HTTP 响应。

请求包括方法（如 GET, POST），路径URL（如 /index.html），头部（如 Content-Type）等信息。

HTTP 是 无状态的，每次请求与之前的请求无关。

## HTTP 状态码

### 2xx：成功

例如 200（OK）。

### 3xx：重定向

例如 301（永久重定向）。

### 4xx：客户端错误

例如 404（资源未找到）。

#### 403 Forbidden

问题描述：服务器拒绝执行请求，即使客户端（浏览器）成功连接到了服务器。

原因：

1. 权限不足：用户没有访问该资源的权限，比如需要登录、特定的用户组权限。
2. IP 限制：服务器限制了某些 IP 的访问。
3. 目录访问禁止：服务器配置不允许访问目录的内容。
4. 文件权限：服务器上文件的权限设置不正确。

解决办法：

- 检查是否需要登录或拥有特定权限。
- 联系管理员检查服务器权限设置。
- 修正服务器配置（如 .htaccess 文件或 Nginx/Apache 配置）。

#### 404 Not Found

问题描述：服务器无法找到客户端请求的资源。

原因：

1. 文件不存在：资源路径错误或文件被删除。
2. 路径拼写错误：URL 输入错误。
3. 重定向失败：设置的路由规则错误或配置失误。
4. 动态资源问题：后端 API 或动态页面未正确处理请求。

解决办法：

- 确认资源路径是否正确。
- 检查服务器文件是否存在。
- 修复路由或重定向规则。
- 检查后端是否正常处理请求。

区别总结：

- 403 是访问受限，用户有可能可以看到资源，但缺少权限。
- 404 是资源不存在，服务器无法找到对应的文件或路径。

### 5xx：服务器错误

例如 500（服务器内部错误）。

#### 500 Internal Server Error

问题描述：服务器在执行请求时发生内部错误。
原因：

1. 服务器内部错误：服务器在执行请求时发生了内部错误，导致无法处理请求。
2. 服务器配置问题：服务器配置错误，导致无法正确处理请求。

解决办法：

- 检查服务器配置是否正确。
- 检查服务器日志，查找错误信息。
- 检查服务器日志中是否有异常信息。

## HTTP 方法

### GET: 获取资源

- 用于请求数据，不会修改服务器上的数据。
- 请求参数放在 URL 中。
- 请求参数长度有限制，一般不超过 2KB。
- 请求参数会被浏览器缓存。

### POST: 提交数据

- 用于向服务器提交数据，会修改服务器上的数据。
- 请求参数放在请求体中。
- 请求参数长度没有限制。
- 请求参数不会被浏览器缓存。

### PUT: 更新资源

- 用于向服务器提交数据，会修改服务器上的数据。
- 请求参数放在请求体中。
- 请求参数长度没有限制。
- 请求参数不会被浏览器缓存。
- 请求参数会被浏览器缓存。

### DELETE: 删除资源

- 用于删除服务器上的数据。
- 请求参数放在 URL 中。
- 请求参数长度有限制，一般不超过 2KB。
- 请求参数不会被浏览器缓存。
- 请求参数会被浏览器缓存。

### PATCH: 部分更新资源

- 用于部分修改服务器上的数据。
- 请求参数放在请求体中。
- 请求参数长度没有限制。
- 请求参数不会被浏览器缓存。
- 请求参数会被浏览器缓存。

#### get post delete put 区别

- GET 请求用于获取数据，不会修改服务器上的数据。
- POST 请求用于向服务器提交数据，会修改服务器上的数据。
- DELETE 请求用于删除服务器上的数据。
- PUT 请求用于修改服务器上的数据。

## 常见面试题

### 1. 浏览器输入 URL 到页面展示经历了什么？

1. 浏览器解析 URL：
    - 浏览器解析 URL，包括协议、域名、端口、路径等。
2. DNS 查询：
    - 浏览器向本地 DNS 服务器发送请求，获取域名对应的 IP 地址。
3. 建立 TCP 连接：
    - 浏览器向服务器发送 SYN 报文，请求建立连接。

- DNS域名解析
- 建立TCP连接、三次握手
- 发送HTTP请求、服务端处理请求、返回响应结果
- 关闭TCP连接、四次挥手
- 浏览器渲染
  - 构建DOM树
  - 样式计算
  - 创建布局树
  - 转为分层树
  - 为每个图层生成绘制列表
  - 通过合成线程渲染到页面


## 参考文章

- [TCP三次握手详解及释放连接过程](https://blog.csdn.net/oney139/article/details/8103223)
- [浏览器的渲染原理简介](https://coolshell.cn/articles/9666.html)
- [一次完整的HTTP请求过程是怎么样的呢？【图文详解】（转载）](https://www.cnblogs.com/Durant0420/p/14989913.html)
- [重学前端----浏览器是如何工作的----寒冬winter](https://www.cnblogs.com/ssaylo/p/12624424.html)

## 参考书籍

- [图解HTTP - 豆瓣](https://book.douban.com/subject/25863515/)
- [图解HTTP - 微信读书](https://weread.qq.com/web/bookDetail/3da32b505dd9f43da9a1aca)
- [《图解HTTP》完整彩色版.pdf](https://github.com/artiely/notes/blob/master/book/%E3%80%8A%E5%9B%BE%E8%A7%A3HTTP%E3%80%8B%E5%AE%8C%E6%95%B4%E5%BD%A9%E8%89%B2%E7%89%88.pdf)

- [HTTP权威指南 - 豆瓣](https://book.douban.com/subject/10746113/)
- [HTTP权威指南 - 微信读书](https://yd.qq.com/web/bookDetail/1d9321c0718ff5e11d9afe8)
- [HTTP权威指南.pdf](https://awesome-programming-books.github.io/http/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.pdf)